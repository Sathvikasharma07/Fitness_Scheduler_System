{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/daily-schedule.service\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"@angular/common\";\n\nfunction ClassListComponent_tr_25_button_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function ClassListComponent_tr_25_button_16_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const class_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.removeFromSchedule(class_r1.id));\n    });\n    i0.ɵɵtext(1, \" Remove from my schedule \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ClassListComponent_tr_25_span_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 6);\n    i0.ɵɵtext(1, \" Not in schedule \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction ClassListComponent_tr_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\");\n    i0.ɵɵtemplate(16, ClassListComponent_tr_25_button_16_Template, 2, 0, \"button\", 3);\n    i0.ɵɵtemplate(17, ClassListComponent_tr_25_span_17_Template, 2, 0, \"span\", 4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const class_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(class_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(class_r1.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.daysOfWeek[class_r1.day_of_week]);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(class_r1.start_time);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", class_r1.duration, \" min\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(class_r1.instructor);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(class_r1.capacity);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isInSchedule(class_r1.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isInSchedule(class_r1.id));\n  }\n}\n\nexport let ClassListComponent = /*#__PURE__*/(() => {\n  class ClassListComponent {\n    constructor(dailyScheduleService, authService) {\n      this.dailyScheduleService = dailyScheduleService;\n      this.authService = authService;\n      this.classes = [];\n      this.userScheduleClassIds = new Set();\n      this.daysOfWeek = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n    }\n\n    ngOnInit() {\n      this.loadClasses();\n\n      if (this.authService.isLoggedIn()) {\n        this.loadUserSchedule();\n      }\n    }\n\n    loadClasses() {\n      this.dailyScheduleService.getDailyClasses().subscribe(data => {\n        this.classes = data;\n        console.log('Classes loaded:', data);\n      }, error => {\n        var _a;\n\n        console.error('Error loading classes', error);\n        alert('Error loading classes: ' + (((_a = error.error) === null || _a === void 0 ? void 0 : _a.message) || 'Unknown error'));\n      });\n    }\n\n    loadUserSchedule() {\n      this.dailyScheduleService.getUserSchedule().subscribe(data => {\n        this.userScheduleClassIds = new Set(data.map(item => item.daily_class_id));\n        console.log('User schedule loaded:', data);\n      }, error => {\n        var _a;\n\n        console.error('Error loading user schedule', error); // Don't show error if user is not authenticated\n\n        if (error.status !== 401) {\n          alert('Error loading your schedule: ' + (((_a = error.error) === null || _a === void 0 ? void 0 : _a.message) || 'Unknown error'));\n        }\n      });\n    }\n\n    isInSchedule(classId) {\n      return this.authService.isLoggedIn() && this.userScheduleClassIds.has(classId);\n    }\n\n    removeFromSchedule(classId) {\n      this.dailyScheduleService.removeFromSchedule(classId).subscribe(() => {\n        this.userScheduleClassIds.delete(classId);\n        alert('Class removed from your schedule!');\n      }, error => {\n        var _a;\n\n        console.error('Error removing class from schedule', error);\n        alert('Error removing class: ' + (((_a = error.error) === null || _a === void 0 ? void 0 : _a.message) || 'Unknown error'));\n      });\n    }\n\n  }\n\n  ClassListComponent.ɵfac = function ClassListComponent_Factory(t) {\n    return new (t || ClassListComponent)(i0.ɵɵdirectiveInject(i1.DailyScheduleService), i0.ɵɵdirectiveInject(i2.AuthService));\n  };\n\n  ClassListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ClassListComponent,\n    selectors: [[\"app-class-list\"]],\n    decls: 26,\n    vars: 1,\n    consts: [[1, \"class-list-container\"], [1, \"description\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"remove-btn\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"not-in-schedule\", 4, \"ngIf\"], [1, \"remove-btn\", 3, \"click\"], [1, \"not-in-schedule\"]],\n    template: function ClassListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n        i0.ɵɵtext(2, \"Available Classes\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"p\", 1);\n        i0.ɵɵtext(4, \"Browse all available fitness classes. Use the Daily Schedule tab to add classes to your personal schedule.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"table\")(6, \"thead\")(7, \"tr\")(8, \"th\");\n        i0.ɵɵtext(9, \"Class Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"th\");\n        i0.ɵɵtext(11, \"Description\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"th\");\n        i0.ɵɵtext(13, \"Day\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"th\");\n        i0.ɵɵtext(15, \"Time\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"th\");\n        i0.ɵɵtext(17, \"Duration\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"th\");\n        i0.ɵɵtext(19, \"Instructor\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"th\");\n        i0.ɵɵtext(21, \"Capacity\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"th\");\n        i0.ɵɵtext(23, \"Action\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(24, \"tbody\");\n        i0.ɵɵtemplate(25, ClassListComponent_tr_25_Template, 18, 9, \"tr\", 2);\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(25);\n        i0.ɵɵproperty(\"ngForOf\", ctx.classes);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf],\n    styles: [\".class-list-container[_ngcontent-%COMP%]{background:rgba(255,255,255,.9);padding:30px;border-radius:15px;box-shadow:0 8px 32px #0000001a}.class-list-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1e3a8a;margin-bottom:10px;text-align:center}.description[_ngcontent-%COMP%]{color:#666;text-align:center;margin-bottom:20px;font-style:italic}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:white;border-radius:10px;overflow:hidden}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:15px;text-align:left;border-bottom:1px solid #E6E6FA}th[_ngcontent-%COMP%]{background:#4B0082;color:#fff;font-weight:600}td[_ngcontent-%COMP%]{color:#1e3a8a}tr[_ngcontent-%COMP%]:hover{background:#F8F8FF}.remove-btn[_ngcontent-%COMP%]{background:#DC2626;color:#fff;border:none;padding:8px 16px;border-radius:5px;cursor:pointer;font-size:12px;transition:background-color .3s}.remove-btn[_ngcontent-%COMP%]:hover{background:#B91C1C}.not-in-schedule[_ngcontent-%COMP%]{color:#6b7280;font-style:italic;font-size:12px}\"]\n  });\n  return ClassListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}